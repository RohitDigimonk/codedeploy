{% extends 'admin/dashboard-template.html' %}
{% block content %}
{% load static %}
{% block cssstyle %}
<link href='{% static "css/jquery.lwMultiSelect.css" %}'  rel="stylesheet" />
<style type="text/css">
  span.select2.select2-container.select2-container--default.select2-container--below.select2-container--focus {
    width: 100% !important;
}

</style>
    {% endblock %}



<div class="container-fluid text-white">
               <div class="row p-t-b-8 ">
                  <div class="col">
                     <h1>Product View</h1>
                  </div>
               </div>
                 <div class="row p-t-b-8">
         <p class="user-nick"> {{user_name}}</p>
  </div>
            </div>
            </header>

<div class="container-fluid">
           
            <div class="row p-t-b-20">
               <div class="col-md-12">
        {% if messages %}
                   {% for message in messages %}
                     {% if message.level == DEFAULT_MESSAGE_LEVELS.INFO %}
                    <div class="alert alert-success alert-dismissible">
                      <a href="#" class="close" data-dismiss="alert" aria-label="close" style="color: crimson!important">&times;</a>
                      <strong>{{message}}</strong> 
                    </div>
                       {% endif %}

                   {% if message.level == DEFAULT_MESSAGE_LEVELS.ERROR %}
                    <div class="alert alert-danger alert-dismissible">
                      <a href="#" class="close" data-dismiss="alert" aria-label="close" style="color: crimson!important">&times;</a>
                      <strong>{{message}}</strong> 
                    </div>
                       {% endif %}

                   {% endfor %}
               {% endif %}
                  <!-- <div class="card no-b"> -->
              <div class="login-form-card">
        
                        <form action="javascript:(0);">
                          <div class="row">
                      <div class="col-md-12 mb-2">
                        <button class="btn-primary add-data"><a href="{{BASE_URL}}products/add-product">Add Product</a></button>
          <button class="btn-primary import-data" data-toggle="modal" data-target="#myModal">Show Columns</button>
          <button class="btn-primary import-data">Import</button>
         </div>
            <div class="col-md-12">
            <!-- <div class="row">
                        <div class="col-md-3">
                     <div class="slct-role-1">
              <label style="font-size: 12px;">Backlog &nbsp;</label>
                <input type="search" name="" class="form-control">
                    </div>
                  </div>
                  <div class="col-md-3">
                     <div class="slct-role-1">
              <label style="font-size: 12px;">Product &nbsp;</label>
                <input type="search" name="" class="form-control">
                    </div>
                    </div>
               <div class="col-md-3">
                    <div class="slct-role-1">
              <label style="font-size: 12px;">Iteration &nbsp;</label>
                <input type="search" name="" class="form-control">
                    </div>
                    </div>
               <div class="col-md-3">
                    <div class="slct-role-1">
              <label style="font-size: 12px;">Team &nbsp;</label>
                <input type="search" name="" class="form-control">
                    </div>
                    </div>
                  </div> -->
                            <div class="col-md-12">
                  <div class="row">
                  <div class="col-md-3">
                     <div class="slct-role-1">
              <label style="">Team &nbsp;</label>
                <input type="search" name="" class="form-control" >
                    </div>
                  </div>
                    <div class="col-md-3">
                    <div class="slct-role-2">
              <label style="">Backlog &nbsp;</label>
                <input type="search" name="" class="form-control" >
                    </div>
                  </div>
                </div>
                </div>

                </div>

            <div class="table-responsive hdinpt">
              
                                     <!-- start Table -->
                                     <div id="example_wrapper" class="dataTables_wrapper no-footer"><div class="dataTables_length" id="example_length"><label>Show <select name="example_length" aria-controls="example" class=""><option value="10">10</option><option value="25">25</option><option value="50">50</option><option value="100">100</option></select> entries</label></div>
                                     <table id="example" width="100%" border="1" class="table table-striped table-bordered newpage dataTable no-footer" align="center" cellpadding="0" cellspacing="0" style="font-size: 15px; width: 100%;" role="grid" aria-describedby="example_info">
                <thead>
            <tr class="dnd-moved">
                <th align="left" valign="top">Priority</th>
                <th align="left" valign="top">Product Name</th>
                <th align="left" valign="top">Product Score</th>
                <th align="left" valign="top">Team</th>
                <th align="left" valign="top">Backlog</th>
                <th align="left" valign="top">Iteration</th>
                <th align="left" valign="top">Epic Capability</th>
                <th align="left" valign="top">Feature</th>
                <th align="left" valign="top">Owner</th>
                <th align="left" valign="top">Action</th>
            </tr>
        </thead>
                <tbody>


<!-- ----------------------------------------------------------------------------- -->

{% for product in product_data %}
            <tr class="dnd-moved">
              <td align="left" valign="top">{{product.Procduct_name}}</td>
                <td align="left" valign="top">{{product.Procduct_name}}</td>
                <td align="left" valign="top">
                     <div class="progress">
                         <div class="barOverflow">
                            <div class="bar"></div>
                         </div>
                         <span>{{product.Product_score}}</span>%
                     </div>
                </td>
                <!-- <td align="left" valign="top">{{product.Team_parent}}</td> -->
                <td align="left" valign="top">{{product.Team_parent.all|join:", " }}</td>
                <td align="left" valign="top">{{product.backlog_by_product.all|join:", " }}</td>
                <td align="left" valign="top">{{product.Procduct_name}} Iteration</td>

                

                <td align="left" valign="top">{{product.epic_by_product.all|join:", "}} </td>
<!--                 {% if epic.0.id == product.id %}

                {% endif %}
 -->




                 <!-- {% for epic_data in epic %}
                {% if epic_data.PROJECT_ID_id == product.id %}

                <td align="left" valign="top">{{epic_data.Cepic_key}}={{epic|length}}</td>


                {% else %}
                    <td align="left" valign="top">{{a}}</td>
                {% endif %}

                
                {% endfor %} -->




                <td align="left" valign="top">{{product.Procduct_name}} Feature</td>
                 <td align="left" valign="top">{{product.Procduct_name}} Owner</td>
                <td align="left" valign="top">
                <table width="100%" border="0" align="left" cellpadding="0" cellspacing="0">
                   <tr>
                    <td align="center" valign="top"><a href="javascript:void(0);" data-toggle="modal" data-target="#modal-default"><i class="icon-pencil"></i></a></td>
                    <td align="center" valign="top"><a href=""><i class="icon-delete"></i><a></td>
                   </tr>
                </table>
                </td>
            </tr>

            {% endfor %}

<!-- --------------------------------------------------------------------------------------- -->



<!-- 
            <tr class="dnd-moved">
              <td align="left" valign="top">7845652587</td>
                <td align="left" valign="top">Text String</td>
                <td align="left" valign="top">
                     <div class="progress">
                         <div class="barOverflow">
                            <div class="bar"></div>
                         </div>
                         <span>60</span>%
                     </div>
                </td>
                <td align="left" valign="top">Text String</td>
                <td align="left" valign="top">Text String </td>
                <td align="left" valign="top">Text String</td>
                <td align="left" valign="top">Text String</td>
                <td align="left" valign="top">Text String</td>
                 <td align="left" valign="top">User 2</td>
                <td align="left" valign="top">
                <table width="100%" border="0" align="left" cellpadding="0" cellspacing="0">
                   <tr>
                    <td align="center" valign="top"><a href="javascript:void(0);" data-toggle="modal" data-target="#modal-default"><i class="icon-pencil"></i></a></td>
                    <td align="center" valign="top"><a href=""><i class="icon-delete"></i><a></td>
                   </tr>
                </table>
                </td>

            </tr>
            <tr class="dnd-moved">
              <td align="left" valign="top">8956466986</td>
                <td align="left" valign="top">Text String</td>
                <td align="left" valign="top">
                     <div class="progress">
                         <div class="barOverflow">
                            <div class="bar"></div>
                         </div>
                         <span>40</span>%
                     </div>
                </td>
                <td align="left" valign="top">Text String</td>
                <td align="left" valign="top">Text String </td>
                <td align="left" valign="top">Text String</td>
                <td align="left" valign="top">Text String</td>
                <td align="left" valign="top">Text String</td>
                 <td align="left" valign="top">User 3</td>
                <td align="left" valign="top">
                <table width="100%" border="0" align="left" cellpadding="0" cellspacing="0">
                   <tr>
                    <td align="center" valign="top"><a href="javascript:void(0);" data-toggle="modal" data-target="#modal-default"><i class="icon-pencil"></i></a></td>
                    <td align="center" valign="top"><a href=""><i class="icon-delete"></i><a></td>
                   </tr>
                </table>
                </td>
            </tr>
            <tr  class="dnd-moved">
              <td align="left" valign="top">3625467896</td>
                <td align="left" valign="top">Text String</td>
                <td align="left" valign="top">
                     <div class="progress">
                         <div class="barOverflow">
                            <div class="bar"></div>
                         </div>
                         <span>20</span>%
                     </div>
                </td>
                <td align="left" valign="top">Text String</td>
                <td align="left" valign="top">Text String </td>
                <td align="left" valign="top">Text String</td>
                <td align="left" valign="top">Text String</td>
                <td align="left" valign="top">Text String</td>
                 <td align="left" valign="top">User 4</td>
                <td align="left" valign="top">
                <table width="100%" border="0" align="left" cellpadding="0" cellspacing="0">
                   <tr>
                    <td align="center" valign="top"><a href="javascript:void(0);" data-toggle="modal" data-target="#modal-default"><i class="icon-pencil"></i></a></td>
                    <td align="center" valign="top"><a href=""><i class="icon-delete"></i><a></td>
                   </tr>
                </table>
                </td>
            </tr>
             -->
        </tbody>
    </table></div>
                                     <!---Table Ends---->
</div>
                                    
                         </form>
                      <!-- </div> -->
             </div>
              <!-- </div> -->
               </div>
             </div>
         </div>








<!-----------------------popup------------start--------------->
<div id="myModal" class="modal fade" role="dialog">
  <div class="modal-dialog modal-lg">

    <!-- Modal content-->
    <div class="modal-content" style="margin-top:60px;">
      <div class="modal-header">
    <h4 class="modal-title" style="width: 100%;">Choose User Story View </h4>
        <button type="button" class="close" data-dismiss="modal" style="margin: 0; padding: 0 !important; color: #000 !important;">&times;</button>
      </div>
      <div class="modal-body ">
    
      <div class="container">
        <select id="selectDefaults" multiple="multiple">
          <option value="owner">Owner</option>
          <option value="title">Title</option>
          <option value="ust">User Story Type</option>
          <option value="stpt">Story Tri Part Text</option>
          <option value="rqs">Readiness Quality Score</option>
          <option value="ecap">Epic Capability</option>
          <option value="team">Team</option>
          <option value="product">Product</option>
          <option value="feature">Feature</option>
          <option value="accri">Acceptance Criteria</option>
          <option value="conv">Conversation</option>
          <option value="autoon">AutoScoring On</option>
          <option value="backpa">Backlog parent</option>
          <option value="usst">User Story Status</option>
          <option value="acind">Archive Indicator</option>
          <option value="stpon">Story Points</option>
        </select>
      </div>
    </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-danger getvalue" data-dismiss="modal">Submit</button>
      </div>
    </div>

  </div>
</div>
<!----------------Popup Ends---------------->
          
{% endblock %}




{% block script %}
<script src='{% static "js/jquery.lwMultiSelect.js" %}' ></script>
<script type="text/javascript">
  function doSomething() {
    $(".se-pre-con").css("display","block");
}
$(document).ready(function(){

{% if set_statue == '' %}
var test ="balnk";
{% else %}
$("#myModalImportCSVOpen").click();
       {% if csv_id == '' %}
        var test ="balnk";
       {% else %}''
        
        $("#myModalImportCSV #show_csv_process").html('<div class="alert alert-success alert-dismissible"><strong>Reading files...</strong></div>');
   var csv_id = '{{csv_id}}';
       $.ajax({
       method:"POST",
       url:"{{BASE_URL}}user-story-view/get_file_data",
       data:{"csv_id":csv_id},
       dataType:"html",
       success:function(data)
       {
        $("#myModalImportCSV #show_csv_process").html(data)
       }
       });

       {% endif %}

      
{% endif %}

});


  $(document).on("click","#create_user_story_copy",function(){
   var ids = new Array();

  $(".get_user_story_ids:checked").each(function(){
             
            ids.push(this.value); 
        });
 var urls = "{{BASE_URL}}user-story-view/create-copys/"; 
if(ids!="")
{
  swal({
      title: "Are you sure?",
      text: "Do you want to created copy of selected Storyes",
      icon: "warning",
      buttons: true,
      dangerMode: true,
    })
    .then((willDelete) => {
      if (willDelete) {
       window.location.href = urls+ids;           
        // swal(done, {
        //   icon: "success",
        // });
      } else {
        swal(fail);
      }
    });
}
else
{
  swal("Warning", "Select the story that you want to create a copy!", "warning");
}


  });
</script>
<script>
$(document).ready(function() {
/*$('#selectDefaults').lwMultiSelect();*/
$('#selectDefaults').lwMultiSelect({
  addAllText:"Select All",
  removeAllText:"Remove All",
  selectedLabel:"Values accepted",
  maxSelect: 0,//0 = no restrictions
  maxText:'',
});
});

$(document).on("click",".click_to_submit",function(){
var urls = "{{BASE_URL}}user-story-view/update-table-structure/"; 
var names = new Array();
$(".lwms-right .lwms-selectli").each(function(){
  names.push($(this).data("value")); 
});

if(names=="")
{
  swal("Warning", "Select the Columns that you want to show in table!", "warning");
}
else{
  swal({
      title: "Are you sure?",
      text: "Do you want to update the table structure.",
      icon: "warning",
      buttons: true,
      dangerMode: true,
    })
    .then((willDelete) => {
      if (willDelete) {
       window.location.href = urls+names;           
        // swal(done, {
        //   icon: "success",
        // });
      } else {
        swal(fail);
      }
    });
}


});
</script>
{% endblock %}
